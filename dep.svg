<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1406px" preserveAspectRatio="none" style="width:845px;height:1406px;" version="1.1" viewBox="0 0 845 1406" width="845px" zoomAndPan="magnify"><defs/><g><!--MD5=[97f29ad3238a01ebe834eec82bab4623]
cluster k8s_env--><rect fill="#FFFFFF" height="1169" style="stroke:#444444;stroke-width:1.0;stroke-dasharray:7.0,7.0;" width="832" x="7" y="231"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="381" y="245.9951">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="221" x="312.5" y="264.1484">Kubernetes environment</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="62" x="392" y="279.0605">[System]</text><!--MD5=[b3b9e5acee42b672c97a29442bc9c271]
cluster catalog_service_postgis_boundary--><rect fill="#FFFFFF" height="198" style="stroke:#444444;stroke-width:1.0;stroke-dasharray:7.0,7.0;" width="509" x="127" y="973"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="339.5" y="987.9951">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="317" x="223" y="1006.1484">catalog-service-postgis deployment</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="80" x="341.5" y="1021.0605">[Container]</text><!--MD5=[bd37c346397033a5acc2d866e73df49f]
cluster pycsw_boundary--><rect fill="#FFFFFF" height="182" style="stroke:#444444;stroke-width:1.0;stroke-dasharray:7.0,7.0;" width="250" x="186" y="523"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="269" y="537.9951">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="166" x="228" y="556.1484">pycsw deployment</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="80" x="271" y="571.0605">[Container]</text><!--MD5=[369bf0f709d3ff0bf378c41e2a8f0ed1]
entity dmci--><rect fill="#438DD5" height="164.3438" style="stroke:#3C7FC0;stroke-width:1.5;" width="220" x="603" y="298"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="74" x="676" y="319.1387">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="41" x="692.5" y="336.8203">dcmi</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="187" x="619.5" y="351.7324">[deployment, service, ingress]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="715" y="367.5576"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="628.5" y="383.8545"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="628.5" y="383.8545">TODO:</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="683.5" y="383.8545">API that receives</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="623.5" y="400.1514">MMD files, convert to ISO.</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="622" y="416.4482">Pushes ISO to PyCSW API,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="615" y="432.7451">update s-enda-mmd-xml Git</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="613" y="449.042">repository with new MMD file.</text><!--MD5=[f02acbec7f163ad128c4d6770a2bfa44]
entity catalog_service_postgis_conf--><rect fill="#85BBF0" height="115.4531" style="stroke:#78A8D8;stroke-width:1.5;" width="227" x="23.5" y="788.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="94.5" y="809.6387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="207" x="33.5" y="827.3203">catalog-service-postgis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75" x="99.5" y="842.2324">[configmap]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="139" y="858.0576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="61" y="874.3545">passwd file for making</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="66.5" y="890.6514">PostGIS work in K8s.</text><!--MD5=[71460f55096b75621c94f5326fbdc513]
entity pycsw_config--><rect fill="#85BBF0" height="115.4531" style="stroke:#78A8D8;stroke-width:1.5;" width="143" x="23.5" y="322.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="52.5" y="343.6387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="117" x="36.5" y="361.3203">pycsw-config</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="75" x="57.5" y="376.2324">[configmap]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="97" y="392.0576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="37.5" y="408.3545">Common PyCSW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="36.5" y="424.6514">configuration file.</text><!--MD5=[8a2bf1ac6938388d859417881613e516]
entity catalog_service_postgis_service--><rect fill="#85BBF0" height="131.75" style="stroke:#78A8D8;stroke-width:1.5;" width="227" x="285.5" y="780"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="356.5" y="801.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="207" x="295.5" y="818.8203">catalog-service-postgis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53" x="372.5" y="833.7324">[service]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="401" y="849.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="332" y="865.8545">Service component</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="309.5" y="882.1514">exposing PostGIS on port</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="379" y="898.4482">5432.</text><!--MD5=[ee0ae862b88f112cf75450280b23f93e]
entity pycsw_service--><rect fill="#85BBF0" height="131.75" style="stroke:#78A8D8;stroke-width:1.5;" width="218" x="202" y="314"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="268.5" y="335.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="56" x="283" y="352.8203">pycsw</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="53" x="284.5" y="367.7324">[service]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="313" y="383.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="244" y="399.8545">Service component</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="212" y="416.1514">exposing PyCSW API on port</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22" x="300" y="432.4482">80.</text><!--MD5=[900d1ed132baa57def00fe05c265c030]
entity catalog_service_postgis_storage--><path d="M143.5,1270 C143.5,1260 257,1260 257,1260 C257,1260 370.5,1260 370.5,1270 L370.5,1374.4531 C370.5,1384.4531 257,1384.4531 257,1384.4531 C257,1384.4531 143.5,1384.4531 143.5,1374.4531 L143.5,1270 " fill="#85BBF0" style="stroke:#78A8D8;stroke-width:1.5;"/><path d="M143.5,1270 C143.5,1280 257,1280 257,1280 C257,1280 370.5,1280 370.5,1270 " fill="none" style="stroke:#78A8D8;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="214.5" y="1295.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="207" x="153.5" y="1312.8203">catalog-service-postgis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="31" x="241.5" y="1327.7324">[pvc]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="259" y="1343.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="179.5" y="1359.8545">Permanent storage for</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="228" y="1376.1514">PostGIS.</text><!--MD5=[f8a2cde5192702d0b05947e5b4eee24c]
entity init_db_directory--><rect fill="#85BBF0" height="99.1563" style="stroke:#78A8D8;stroke-width:1.5;" width="214" x="406" y="1048"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="470.5" y="1069.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="144" x="441" y="1086.8203">init-db-directory</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="48" x="489" y="1101.7324">[alpine]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="515" y="1117.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="420" y="1133.8545">Initialize database directory.</text><!--MD5=[2b7d838cbd7b9d508261623db6afab1a]
entity catalog_service_postgis--><rect fill="#85BBF0" height="115.4531" style="stroke:#78A8D8;stroke-width:1.5;" width="227" x="143.5" y="1040"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="214.5" y="1061.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="207" x="153.5" y="1078.8203">catalog-service-postgis</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="102" x="206" y="1093.7324">[postgis/postgis]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="259" y="1109.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="170.5" y="1125.8545">Holds ISO data translated</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="183" y="1142.1514">from MMD for PyCSW.</text><!--MD5=[266f495ddff2b88ba7bd99807d9b2a51]
entity pycsw1--><rect fill="#85BBF0" height="99.1563" style="stroke:#78A8D8;stroke-width:1.5;" width="218" x="202" y="590"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="268.5" y="611.1387">«component»</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="56" x="283" y="628.8203">pycsw</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120" x="251" y="643.7324">[geopython/pycsw]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="313" y="659.5576"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="216" y="675.8545">Running instance of PyCSW.</text><!--MD5=[a6e6e56ccc42f330355e4c933d7c5cc2]
entity internal_user--><rect fill="#08427B" height="149.4844" style="stroke:#073B6F;stroke-width:1.5;" width="218" x="403" y="7"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="57" x="483.5" y="28.1387">«person»</text><image height="48" width="48" x="488" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAABuUlEQVR42u2Yv0oEMRDGp/QRfIR7BVs7Gx9AH0CwtrtKLNXSRsRSG8HCxkbQVrSykoOrzlILC9v4gwMRNptMMsnu3nHDFMcSLh/f/PsmsrY5HpTLUgHaOri8uHt+eJm8vs/wm8e38fn9aPekB0D7p7df3z+uxYC4sXfWEaD17SPIcAqDreqAQBMgpmnHV091ASm5+W8EtxYgQuCyDF7LA+JPXa5RieUBwbwzWHlAVLIFEB2rMKCk4rK0AC0gZzN9/S8soOnHpwWQvhtpATE4h5XUlrKnIKp06uxCS5poCzs6stvjzuF1XfmRVG4ZkihHMSp5SuXGJGG5LEAVPSIpb4qJfIQzQeF6OMORGXSHbCjLuAb1CYhti7whQHQ5PLrlcHh+kiAyN/RxFE0/9OYvH+dJw33gw/nB4bYa5Ltmokl4MTXqMi+sMFtSfFBEDWoD67bUkPSa+d/Gk3i7i6tvxE4LyLhgGOeu9ELPXzLFAVHJrkNrZreUFfN28S9l1x27upVSLwp5hlIYFqBm8a8ADRxQJIfszy72ZxrpeKxGR6xnltEbupkbXtkpbQsh6ozhV8kDCni1dcT8F2bsoAKLcdt7AAAAAElFTkSuQmCC" y="30.9688"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="41" x="491.5" y="93.8203">User</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="0" x="514" y="110.5889"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="417" y="126.8857">User of the S-ENDA Vagrant</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="490" y="143.1826">setup.</text><!--MD5=[236dc20b3a44a955d24e115f02b58143]
reverse link catalog_service_postgis_conf to catalog_service_postgis--><path d="M167.74,910.91 C186.86,950.66 211.23,1001.33 229.67,1039.68 " fill="none" id="catalog_service_postgis_conf-backto-catalog_service_postgis" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="164.23,903.62,164.9955,912.1296,170.4021,909.528,164.23,903.62" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="130" x="191" y="954.1387">Mount passwd file</text><!--MD5=[a8196e785357edc8159f32345363b33b]
link catalog_service_postgis to catalog_service_postgis_storage--><path d="M257,1155.22 C257,1184.53 257,1220.55 257,1251.52 " fill="none" id="catalog_service_postgis-to-catalog_service_postgis_storage" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="257,1259.69,260,1251.69,254,1251.69,257,1259.69" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="101" x="263.5" y="1199.1387">Stores data in</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="112" x="258" y="1213.1074">physical volume</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="36" x="298" y="1227.0762">claim</text><!--MD5=[50acea82b218800edbdcc8b26a6a1cfc]
reverse link pycsw_config to pycsw1--><path d="M119.05,444.87 C128.53,465.77 140.63,488.39 155,507 C179.13,538.26 211.84,567.24 241.07,589.99 " fill="none" id="pycsw_config-backto-pycsw1" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="115.8,437.56,116.2999,446.0894,121.785,443.6575,115.8,437.56" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="146" x="156" y="504.1387">Mount the config file</text><!--MD5=[9296b8b3af7c368d710e517fe08f368c]
link pycsw1 to catalog_service_postgis_service--><path d="M331.97,689.22 C342.61,713.95 355.75,744.5 367.57,771.97 " fill="none" id="pycsw1-to-catalog_service_postgis_service" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="370.87,779.63,370.4661,771.0955,364.954,773.4655,370.87,779.63" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="117" x="359" y="733.1387">Reads data from</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="60" x="389.5" y="747.1074">PostGIS.</text><!--MD5=[1c7ddb274974e857628922aaaeb5541a]
link catalog_service_postgis_service to catalog_service_postgis--><path d="M361.88,912.23 C340.77,949.32 314.44,995.57 293.45,1032.46 " fill="none" id="catalog_service_postgis_service-to-catalog_service_postgis" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="289.32,1039.71,295.883,1034.2394,290.6676,1031.2729,289.32,1039.71" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="346" y="954.1387">LB</text><!--MD5=[b3686706b3a6d076c773dcfc094b71ab]
link internal_user to pycsw_service--><path d="M462.06,156.17 C430.81,202.27 390.74,261.38 359.72,307.13 " fill="none" id="internal_user-to-pycsw_service" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="355.21,313.78,362.1782,308.8359,357.2091,305.4732,355.21,313.78" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="134" x="443" y="198.1387">Access CSW API via</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="106" x="457" y="212.1074">[10.10.10.10:80]</text><!--MD5=[b0ac1022334dcefc98ced3b2ddd74658]
link internal_user to dmci--><path d="M565.1,156.04 C572.19,166.06 579.31,176.26 586,186 C609.3,219.97 634.35,257.74 655.99,290.8 " fill="none" id="internal_user-to-dmci" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="660.55,297.78,658.6786,289.4435,653.6585,292.7296,660.55,297.78" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="146" x="604" y="198.1387">Uploads MMD file via</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="122" x="616" y="212.1074">[10.10.10.10:8000]</text><!--MD5=[55e18eb9965bd60fcea276f0174c3833]
reverse link pycsw_service to dmci--><path d="M428.11,380 C483.25,380 548.64,380 602.87,380 " fill="none" id="pycsw_service-backto-dmci" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="420.05,380,428.05,383,428.05,377,420.05,380" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="142" x="438.5" y="360.1387">Forwards converted</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="88" x="467.5" y="374.1074">metadata to</text><!--MD5=[11066804b7ccd181933291302a565ec5]
link pycsw_service to pycsw1--><path d="M311,446.31 C311,488.13 311,541.85 311,581.86 " fill="none" id="pycsw_service-to-pycsw1" style="stroke:#666666;stroke-width:1.0;"/><polygon fill="#666666" points="311,589.93,314,581.93,308,581.93,311,589.93" style="stroke:#666666;stroke-width:1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="17" x="312" y="504.1387">LB</text><!--MD5=[8f05bdba1ac8e9bc89d564fae99bd2d0]
@startuml dep
!includeurl https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/v2.0.1/C4_Component.puml

LAYOUT_TOP_DOWN()
'LAYOUT_LEFT_RIGHT
'LAYOUT_WITH_LEGEND()
'LAYOUT_AS_SKETCH()


'
' Persons
'
Person(internal_user, "User", "User of the S-ENDA Vagrant setup.")

'- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

System_Boundary(k8s_env, "Kubernetes environment") {

'
'
'

Container(dmci, "dcmi", "deployment, service, ingress", "<b>TODO:</b> API that receives MMD files, convert to ISO. Pushes ISO to PyCSW API, update s-enda-mmd-xml Git repository with new MMD file.")
'Rel_R(dmci, pycsw_service, "Upload ISO with API")


'
' ConfigMap
'
Component(catalog_service_postgis_conf, "catalog-service-postgis", "configmap", "passwd file for making PostGIS work in K8s.")
Component(pycsw_config, "pycsw-config", "configmap", "Common PyCSW configuration file.")

'
' Services
'
Component(catalog_service_postgis_service, "catalog-service-postgis", "service", "Service component exposing PostGIS on port 5432.")
Component(pycsw_service, "pycsw", "service", "Service component exposing PyCSW API on port 80.")
'
' Deployment catalog-service-postgis
'
Container_Boundary("catalog_service_postgis_boundary", "catalog-service-postgis deployment") {
  Component(init_db_directory, "init-db-directory", "alpine", "Initialize database directory.")
  Component(catalog_service_postgis, "catalog-service-postgis", "postgis/postgis", "Holds ISO data translated from MMD for PyCSW.")
  Rel_U(catalog_service_postgis, catalog_service_postgis_conf, "Mount passwd file")
}

ComponentDb(catalog_service_postgis_storage, "catalog-service-postgis", "pvc", "Permanent storage for PostGIS.")

Rel(catalog_service_postgis, catalog_service_postgis_storage, "Stores data in physical volume claim")

'
' Deployment pycsw
'
Container_Boundary("pycsw_boundary", "pycsw deployment") {
  Component(pycsw1, "pycsw", "geopython/pycsw", "Running instance of PyCSW.")

  Rel_U(pycsw1, pycsw_config, "Mount the config file")
}

Rel(pycsw1, catalog_service_postgis_service, "Reads data from PostGIS.")
Rel(catalog_service_postgis_service, catalog_service_postgis, "LB")

'
' Deployment pycsw-ingest
'

Rel(internal_user, pycsw_service, "Access CSW API via", "10.10.10.10:80")
Rel(internal_user, dmci, "Uploads MMD file via", "10.10.10.10:8000")
Rel_L(dmci, pycsw_service,"Forwards converted metadata to")
Rel(pycsw_service, pycsw1, "LB")

}

@enduml

@startuml dep





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam LegendBorderColor transparent
skinparam LegendBackgroundColor transparent
skinparam LegendFontColor #FFFFFF

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam queue {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}





























skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

sprite $person [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
0000000000000000000049BCCA7200000000000000000000
0000000000000000006EFFFFFFFFB3000000000000000000
00000000000000001CFFFFFFFFFFFF700000000000000000
0000000000000001EFFFFFFFFFFFFFF80000000000000000
000000000000000CFFFFFFFFFFFFFFFF6000000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
00000000000001FFFFFFFFFFFFFFFFFFF900000000000000
00000000000006FFFFFFFFFFFFFFFFFFFF00000000000000
0000000000000BFFFFFFFFFFFFFFFFFFFF40000000000000
0000000000000EFFFFFFFFFFFFFFFFFFFF70000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000DFFFFFFFFFFFFFFFFFFFF60000000000000
0000000000000AFFFFFFFFFFFFFFFFFFFF40000000000000
00000000000006FFFFFFFFFFFFFFFFFFFE00000000000000
00000000000000EFFFFFFFFFFFFFFFFFF800000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
000000000000000BFFFFFFFFFFFFFFFF5000000000000000
0000000000000001DFFFFFFFFFFFFFF70000000000000000
00000000000000000BFFFFFFFFFFFF500000000000000000
0000000000000000005DFFFFFFFFA1000000000000000000
0000000000000000000037ABB96100000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000025788300000000005886410000000000000
000000000007DFFFFFFD9643347BFFFFFFFB400000000000
0000000004EFFFFFFFFFFFFFFFFFFFFFFFFFFB1000000000
000000007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFD200000000
00000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE10000000
0000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB0000000
000000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000000
000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD000000
000009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF200000
00000DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF600000
00000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF800000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF700000
000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE100000
0000008FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD3000000
000000014555555555555555555555555555555300000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam queue<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam rectangle<<external_container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #B3B3B3
    BorderColor #A6A6A6
}

skinparam database<<external_container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #B3B3B3
    BorderColor #A6A6A6
}

skinparam queue<<external_container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #B3B3B3
    BorderColor #A6A6A6
}

















skinparam rectangle<<component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}

skinparam database<<component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}

skinparam queue<<component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #85BBF0
    BorderColor #78A8D8
}

skinparam rectangle<<external_component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #CCCCCC
    BorderColor #BFBFBF
}

skinparam database<<external_component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #CCCCCC
    BorderColor #BFBFBF
}

skinparam queue<<external_component>> {
    StereotypeFontColor #000000
    FontColor #000000
    BackgroundColor #CCCCCC
    BorderColor #BFBFBF
}











top to bottom direction


rectangle "<$person>\n==User\n\n User of the S-ENDA Vagrant setup." <<person>> as internal_user


rectangle "==Kubernetes environment\n<size:12>[System]</size>" <<boundary>> as k8s_env {


rectangle "==dcmi\n//<size:12>[deployment, service, ingress]</size>//\n\n <b>TODO:</b> API that receives MMD files, convert to ISO. Pushes ISO to PyCSW API, update s-enda-mmd-xml Git repository with new MMD file." <<container>> as dmci


rectangle "==catalog-service-postgis\n//<size:12>[configmap]</size>//\n\n passwd file for making PostGIS work in K8s." <<component>> as catalog_service_postgis_conf
rectangle "==pycsw-config\n//<size:12>[configmap]</size>//\n\n Common PyCSW configuration file." <<component>> as pycsw_config

rectangle "==catalog-service-postgis\n//<size:12>[service]</size>//\n\n Service component exposing PostGIS on port 5432." <<component>> as catalog_service_postgis_service
rectangle "==pycsw\n//<size:12>[service]</size>//\n\n Service component exposing PyCSW API on port 80." <<component>> as pycsw_service
rectangle "==catalog-service-postgis deployment\n<size:12>[Container]</size>" <<boundary>> as catalog_service_postgis_boundary {
  rectangle "==init-db-directory\n//<size:12>[alpine]</size>//\n\n Initialize database directory." <<component>> as init_db_directory
  rectangle "==catalog-service-postgis\n//<size:12>[postgis/postgis]</size>//\n\n Holds ISO data translated from MMD for PyCSW." <<component>> as catalog_service_postgis
catalog_service_postgis -UP->> catalog_service_postgis_conf : **Mount passwd file**
}

database "==catalog-service-postgis\n//<size:12>[pvc]</size>//\n\n Permanent storage for PostGIS." <<component>> as catalog_service_postgis_storage

catalog_service_postgis - ->> catalog_service_postgis_storage : **Stores data in physical volume claim**

rectangle "==pycsw deployment\n<size:12>[Container]</size>" <<boundary>> as pycsw_boundary {
  rectangle "==pycsw\n//<size:12>[geopython/pycsw]</size>//\n\n Running instance of PyCSW." <<component>> as pycsw1

pycsw1 -UP->> pycsw_config : **Mount the config file**
}

pycsw1 - ->> catalog_service_postgis_service : **Reads data from PostGIS.**
catalog_service_postgis_service - ->> catalog_service_postgis : **LB**


internal_user - ->> pycsw_service : **Access CSW API via**\n//<size:12>[10.10.10.10:80]</size>//
internal_user - ->> dmci : **Uploads MMD file via**\n//<size:12>[10.10.10.10:8000]</size>//
dmci -LEFT->> pycsw_service : **Forwards converted metadata to**
pycsw_service - ->> pycsw1 : **LB**

}

@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: nb
Country: NO
--></g></svg>